<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>

	<!-- Massive Relay -->

	<StationType UNID="&stCCMassiveRelay;"
			name=				"(relay)"
			sovereign=			"&svIndependent;"
			dockScreen=			"Main"
			dockingPorts=		"2"
			
			multiHull=			"true"
			immutable=			"true"
			attributes=			"cabbageCorp, stargate"
			
			gateEffect=			"&efStargateOut;"
			
			definiteArticle=	"true"
			>
			
		<Image imageID="&rsCCStations;" imageX="100" imageY="0" imageWidth="28" imageHeight="192"/>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default
							desc=	"You are docked at a giant alien tuning fork These giant structures are used by the Ancient Races to move their starships across the Galaxy. Tuning forks are the best mode of faster-than-light travel and they are the only method known to cabbages.">
							
						<Actions>
							<Action name="Check out the Sights" default="1" key="C">
								<ShowPane pane="Sights"/>
							</Action>
							
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
					
					<Sights
							desc=	"Nothing to see here. Move along.">
							
						<Actions>
							<Action name="Go back to the start" default="1" key="G">
								(block Nil
									(objGateTo gPlayership "SE" "Start" &efStargateOut;)
									)
							</Action>
							
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Sights>
				</Panes>
			</Main>
		</DockScreens>
	</StationType>

	<!-- Praclarush -->

	<StationType UNID="&stCCPraclarush;"
			name=				"(primordial terrestrial)"
			scale=				"world"
			size=				"22000"
			sovereign=			"&svIndependent;"
			
			attributes=			"cabbageCorp; inner, lifeZone, outer, primordial, terrestrial"
			>
			
		<ImageVariants>
			<Image imageID="&rsCCStations;" imageX="320" imageY="0" imageWidth="270" imageHeight="270"/>
		</ImageVariants>
	</StationType>

	<!-- Othala -->

	<SystemType UNID=					"&ssCCOthala;"
				noRandomEncounters=		"true"
				backgroundID=			"&rsCCCabbagianExpanseSpace;"
				>
				
		<SystemGroup>
		
			<!-- Star -->
			
			<Station type="&stWhiteDwarfStar;" name="Othala"/>
			
			<!-- Inner Planet -->
			
			<Orbitals distance="4" scale="light-minute" angle="random">
				<Group>
					<Station type="&stCCPraclarush;" 
							name="Praclarush"
							showOrbit="true"
							/>
							
					<Orbitals distance="2" angle="180">
						<Station type="&stCCPraclarushStation;"/>
					</Orbitals>
				</Group>
			</Orbitals>
			
			<!-- Asteroid Belt -->
			
			<Orbitals distance="7" scale="light-minute" angle="random">
				<Group>
					<Siblings count="600" distribution="4d40-82">
						<Station type="&stRockyAsteroidSizeA;"/>
					</Siblings>
					
					<Siblings count="80" distribution="4d20-42">
						<Station type="&stRockyAsteroidSizeB;"/>
					</Siblings>
					
					<!--
					<Siblings count="1d6+6" distribution="4d40-82">
						<Label attributes="asteroids,asteroidbelt"/>
					</Siblings>
					-->
				</Group>
			</Orbitals>
			
			<!-- Hala -->
			
			<Orbitals distance="12" scale="light-minute" angle="random">
				<Group>
					<Station type="&stIcePlanet;" 
							name="Hala"
							showOrbit="true"
							/>
							
					<Orbitals distance="20" angle="equidistant">
						<Stargate objName="Outbound" to="Othala:Outbound" type="&stCCMassiveRelay;"/>
						
						<Marker objName="Start"/>
					</Orbitals>
				</Group>
			</Orbitals>
		</SystemGroup>
	</SystemType>

<!-- DOCK SCREENS -->

	<!-- Praclarush Station-->

	<StationType UNID="&stCCPraclarushStation;"
			name=				"Praclarush Station"
			sovereign=			"&svIndependent;"
			dockScreen=			"Main"
            defaultBackgroundID="&rsCCPraclarushHangar;"
			dockingPorts=		"1"
			
			cargoSpace=			"5000"
			maxCargoSpace=		"5000"
			
			multiHull=			"true"
			immutable=			"true"
			attributes=			"cabbageCorp"
			
			unique=				"inSystem"
			
			definiteArticle=	"true"
			>
			
		<ImageVariants>
			<Image imageID="&rsCCStations;" imageX="320" imageY="0" imageWidth="4" imageHeight="4"/>
		</ImageVariants>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (desc)
								(switch
									(not (objGetData gSource "foundHangarControls"))
										(scrSetDesc gScreen 
											(cat 
												"As your ship lands in the docking bay of the ancient outpost the outer doors suddenly activate and shut, sealing you and your ship inside while the air processors activate and start removing the ash from the air."
												"\n\n"
												"It is too dangerous to open the doors manually due to the hostile environment outside.  You need to find a way to control the doors remotely."
												)
											)
									(scrSetDesc gScreen "As your ship lands in the docking bay of the ancient station the outer doors suddenly activate and shut, sealing you and your ship inside.")
									)
								(if (eq (objGetData gSource 'foundWarehouse) True)
									(scrAddAction
										gScreen
										'Warehouse
										1
										"Warehouse"
										"W"
										Nil
										(scrShowPane gScreen "Storage")
										)
									)
								(if (eq (objGetData gSource 'foundControlRoom) True)
									(scrAddAction
										gScreen
										'ControlRoom
										1
										"Control Room"
										"C"
										Nil
										(scrShowPane gScreen "Hub")
										)
									)
								(if (not (objGetData gSource 'foundHangarControls))
									(scrAddAction
										gScreen
										'Idiot
										1
										"Stand around like an idiot"
										"S"
										'cancel
										(scrShowPane gScreen "Default")
										)
									)
								(if (eq (objGetData gSource 'foundHangarControls) True)
									(scrAddAction
										gScreen
										'Undock
										-1
										"Undock"
										"U"
										'cancel
										(scrExitScreen gScreen 'forceUndock)
										)
									)
								)
						</OnPaneInit>
						
						<Actions>
							<Action name="Explore the station" default="1" key="E">
								<ShowPane pane="Explore"/>
							</Action>
						</Actions>
					</Default>
					
					<Explore>
						<OnPaneInit>
							(block Nil
								(switch
									(eq (objGetData gSource 'successfullyExploredStation) 1)
										(block Nil
											(scrSetDesc gScreen 
												(cat 
													"After further exploration of the hangar, you find a working console that gives you complete control of the hangar, including doors, device installation and refuelling operations."
													"\n\n"
													"You promptly reroute these controls to your ship so you do not have to cross the hangar while the doors are open to the hostile environment whenever you want to leave the station."
													)
												)
											(objSetData gSource "successfullyExploredStation" 2)
											(objSetData gSource "foundHangarControls" True)
											)
										
									(not (objGetData gSource 'successfullyExploredStation))
										(block Nil
											(scrSetDesc gScreen "After checking out the hanger, you find out that the huge inner doors head to a warehouse with all of the equipment necessary to quickly transfer cargo to and from your ship.")
											(objSetData gSource "successfullyExploredStation" 1)
											(objSetData gSource "foundWarehouse" True)
											)
										
									(scrSetDesc gScreen "You did not manage to find anything new.")
									)
								)
						</OnPaneInit>
						
						<Actions>
							<Action name="Done" cancel="1" key="D">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Explore>
					
					<Storage>
						<OnPaneInit>
							(scrSetDesc gScreen
								(cat "You are in a warehouse adjacent to the docking bay.  The station's loading equipment appears to still be functional and could be used to move cargo to and from your ship."
									"\n\n"
									"The warehouse currently has "
									(objGetCargoSpaceLeft gSource)
									" tons of cargo space available."
									"\n"
									"(Apparently you can not define cargo limits for a station.)"
									)
								)
						</OnPaneInit>
						
						<Actions>
							<Action name="Store items" key="S" default="1" >
								(scrShowScreen gScreen &dsRPGJettison;)
							</Action>
						
							<Action name="Retrieve items" key="R">
								(scrShowScreen gScreen &dsRPGLoot;)
							</Action>

							<Action name="Back" cancel="1" key="B">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Storage>
					
					<ControlRoom>
					</ControlRoom>
				</Panes>
			</Main>
		</DockScreens>
	</StationType>

<!-- RESOURCES -->

	<Image UNID="&rsCCCabbagianExpanseSpace;"		bitmap="CabbagianExpanseSpace.jpg"	loadOnUse="true"/>
	<Image UNID="&rsCCPraclarushHangar;"			bitmap="PraclarushHangar.jpg"		loadOnUse="true" />

</TranscendenceModule>
