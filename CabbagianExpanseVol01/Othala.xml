<?xml version="1.0" encoding="utf-8"?>

<TranscendenceModule>

	<!-- Massive Relay -->

	<StationType UNID="&stCCMassiveRelay;"
			name=				"Unknown Object"
			sovereign=			"&svIndependent;"
			dockScreen=			"Main"
			dockingPorts=		"2"
			
			multiHull=			"true"
			immutable=			"true"
			attributes=			"cabbageCorp, stargate"
			
			gateEffect=			"&efStargateOut;"
			
			definiteArticle=	"true"
			>
			
		<Image imageID="&rsCCMassiveRelay;" imageWidth="130" imageHeight="340" imageFrameCount="120" imageTicksPerFrame="1" animationColumns="12"/>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default
							desc=	"You are docked at a giant alien tuning fork These giant structures are used by the Ancient Races to move their starships across the Galaxy. Tuning forks are the best mode of faster-than-light travel and they are the only method known to cabbages.">
							
						<Actions>
							<Action name="Check out the Sights" default="1" key="C">
								<ShowPane pane="Sights"/>
							</Action>
							
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Default>
					
					<Sights
							desc=	"Nothing to see here. Move along.">
							
						<Actions>
							<Action name="Go back to the start" default="1" key="G">
								(block Nil
									(objGateTo gPlayership "SE" "Start" &efStargateOut;)
									)
							</Action>
							
							<Action name="Undock" cancel="1" key="U">
								<Exit/>
							</Action>
						</Actions>
					</Sights>
				</Panes>
			</Main>
		</DockScreens>
	</StationType>

	<!-- Praclarush -->

	<StationType UNID="&stCCPraclarush;"
			name=				"(primordial terrestrial)"
			scale=				"world"
			size=				"22000"
			sovereign=			"&svIndependent;"
			
			attributes=			"cabbageCorp; inner, lifeZone, outer, primordial, terrestrial"
			>
			
		<ImageVariants>
			<Image imageID="&rsCCPraclarush;" imageX="0" imageY="0" imageWidth="270" imageHeight="270"/>
		</ImageVariants>
	</StationType>

	<!-- Othala -->

	<SystemType UNID=					"&ssCCOthala;"
				noRandomEncounters=		"true"
				backgroundID=			"&rsCCCabbagianExpanseSpace;"
				>
				
		<SystemGroup>
		
			<!-- Star -->
			
			<Station type="&stWhiteDwarfStar;" name="Othala"/>
			
			<!-- Inner Planet -->
			
			<Orbitals distance="6" scale="light-minute" angle="12d21+168">
				<Group>
					<Station type="&stCCPraclarush;" 
							name="Praclarush"
							showOrbit="true"
							/>
							
					<Orbitals distance="2" angle="180">
						<Station type="&stCCPraclarushStation;"/>
					</Orbitals>
				</Group>
			</Orbitals>
			
			<!-- Outer Planet -->
			
			<Orbitals distance="13" scale="light-minute" angle="2d6+293">
				<Group>
					<Primary>
						<Station type="&stIcePlanet;" name="Hala" showOrbit="true"/>
					</Primary>
							
					<Siblings radiusInc="12">
						<Group>
							<Station type="&stCCMassiveRelay;"/>
							
							<Siblings radiusInc="8">
								<Marker objName="Start"/>
							</Siblings>
						</Group>
					</Siblings>
				</Group>
			</Orbitals>
			
			<!-- Asteroid Belt -->
			
			<Orbitals distance="21" scale="light-minute" angle="random">
				<Group>
					<Siblings count="600" distribution="4d40-82">
						<Station type="&stRockyAsteroidSizeA;"/>
					</Siblings>
					
					<Siblings count="80" distribution="4d20-42">
						<Station type="&stRockyAsteroidSizeB;"/>
					</Siblings>
				</Group>
			</Orbitals>
			
			<!-- Hala -->
		</SystemGroup>
	</SystemType>

<!-- DOCK SCREENS -->

	<!-- Praclarush Station-->

	<StationType UNID="&stCCPraclarushStation;"
			name=				"Ancient Station"
			sovereign=			"&svIndependent;"
			
			dockScreen=			"Main"
            defaultBackgroundID="&rsCCPraclarushHangar;"
			dockingPorts=		"1"
			
			multiHull=			"true"
			immutable=			"true"
			attributes=			"cabbageCorp"
			
			unique=				"inGame"
			
			definiteArticle=	"true"
			>
			
		<ImageVariants>
			<Image imageID="&rsCCPraclarush;" imageX="0" imageY="0" imageWidth="4" imageHeight="4"/>
		</ImageVariants>
		
		<DockScreens>
			<Main>
				<Panes>
					<Default>
						<OnPaneInit>
							(block (actionStatus desc)
								(switch
									(not (objGetData gSource "networkAvailable"))
										(scrSetDescTranslate gScreen 'descHangarSealedInside)
										
									(scrSetDescTranslate gScreen 'descHangarDefault)
									)
									
								;	Access Station Network Action
								
								(setq actionStatus (rpgCalcPraclarushNetworkAction))
								(scrShowAction gScreen 'actionNetwork (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionNetwork (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionNetwork (@ actionStatus 'desc))
								
								;	Engineering Deck Action
								
								(setq actionStatus (rpgCalcPraclarushEngineeringAction))
								(scrShowAction gScreen 'actionEngineering (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionEngineering (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionEngineering (@ actionStatus 'desc))
								
								;	Explore Hangar Action
								
								(setq actionStatus (rpgCalcPraclarushExploreAction))
								(scrShowAction gScreen 'actionExplore (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionExplore (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionExplore (@ actionStatus 'desc))
								
								;	Hydroponics Deck Action
								
								(setq actionStatus (rpgCalcPraclarushHydroponicsAction))
								(scrShowAction gScreen 'actionHydroponics (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionHydroponics (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionHydroponics (@ actionStatus 'desc))
								
								;	Infirmary Deck Action
								
								(setq actionStatus (rpgCalcPraclarushInfirmaryAction))
								(scrShowAction gScreen 'actionInfirmary (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionInfirmary (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionInfirmary (@ actionStatus 'desc))
								
								;	Maintenance Deck Action
								
								(setq actionStatus (rpgCalcPraclarushMaintenanceAction))
								(scrShowAction gScreen 'actionMaintenance (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionMaintenance (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionMaintenance (@ actionStatus 'desc))
								
								;	Operations Deck Action
								
								(setq actionStatus (rpgCalcPraclarushOperationsAction))
								(scrShowAction gScreen 'actionOperations (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionOperations (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionOperations (@ actionStatus 'desc))
								
								;	Undock Action
								
								(setq actionStatus (rpgCalcPraclarushUndockAction))
								(scrShowAction gScreen 'actionUndock True)
								(scrEnableAction gScreen 'actionUndock True)
								(scrSetActionDesc gScreen 'actionUndock (@ actionStatus 'desc))
								)
						</OnPaneInit>
						
						<Actions>
							<Action id="actionExplore" default="1">
								<ShowPane pane="Explore"/>
							</Action>
							
							<Action id="actionNetwork" default="1">
								<ShowPane pane="Network"/>
							</Action>
							
							<Action id="actionEngineering">
								<ShowPane pane="Engineering"/>
							</Action>
							
							<Action id="actionHydroponics">
								<ShowPane pane="Hydroponics"/>
							</Action>
							
							<Action id="actionInfirmary">
								<ShowPane pane="Infirmary"/>
							</Action>
							
							<Action id="actionMaintenance">
								<ShowPane pane="Maintenance"/>
							</Action>
							
							<Action id="actionOperations">
								<ShowPane pane="Operations"/>
							</Action>
							
							<Action id="actionUndock" cancel="1">
								(if (@ (rpgCalcPraclarushUndockAction) 'enabled)
									(block Nil
										(sysStartTime)
										(scrExitScreen gScreen 'forceUndock)
										)
									(scrShowPane gScreen "Default")
									)
							</Action>
						</Actions>
					</Default>
					
					<Engineering>
					</Engineering>
					
					<Explore>
						<OnPaneInit>
							(block Nil
								(scrSetDescTranslate gScreen 'descExploreDefault)
								(objSetData gSource "networkAvailable" True)
								)
						</OnPaneInit>
						
						<Actions>
							<Action id="actionDone" default="1" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Explore>
					
					<Hydroponics>
					</Hydroponics>
					
					<Infirmary>
					</Infirmary>
					
					<Maintenance>
						<OnPaneInit>
							(scrSetDescTranslate gScreen 'descMaintenanceDefault)
						</OnPaneInit>
						
						<Actions>
							<Action id="actionStore" default="1">
								(scrShowScreen gScreen &dsRPGJettison;)
							</Action>
							
							<Action id="actionRetrieve">
								(scrShowScreen gScreen &dsRPGLoot;)
							</Action>
							
							<Action id="actionLeave" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Maintenance>
					
					<Network>
						<OnPaneInit>
							(block (actionStatus)
								(scrSetDescTranslate gScreen 'descNetworkDefault)
								
								;	Maintenance Deck Action
								
								(setq actionStatus
									(if (objGetData gSource "maintenanceAvailable")
										{visible:Nil}
										{visible:True enabled:True desc:Nil}
										)
									)
								
								(scrShowAction gScreen 'actionNetworkEnableMaintenance (@ actionStatus 'visible))
								(scrEnableAction gScreen 'actionNetworkEnableMaintenance (@ actionStatus 'enabled))
								(scrSetActionDesc gScreen 'actionNetworkEnableMaintenance (@ actionStatus 'desc))
							)
						</OnPaneInit>
						
						<Actions>
							<Action id="actionNetworkEnableMaintenance">
								(block Nil
									(objSetData gSource "maintenanceAvailable" True)
									(scrShowPane gScreen "Network")
									(scrSetDesc gSCreen (cat
										"Status: CCNet&trade; Online                   CCOS&trade; v1.0.0\n"
										"  User:  root\n"
										"\n"
										"***WARNING***\n"
										"Terminal insecure, please log out of root soonish.\n"
										"---------------------------------------------------------------------------\n"
										"Maintenance bay power has been restored.\n"
										))
									)
							</Action>
							
							<Action id="actionDone" cancel="1">
								<ShowPane pane="Default"/>
							</Action>
						</Actions>
					</Network>
					
					<Operations>
					</Operations>
				</Panes>
			</Main>
		</DockScreens>
		
		<Language>
			<Text id="actionNetwork">"[A]ccess the station network"</Text>
			<Text id="actionNetwork:unauthorized">"You are not authorized to access this command."</Text>
			<Text id="actionNetworkEnableMaintenance">"Restore power to [M]aintenance"</Text>
			<Text id="descNetworkDefault">
				(cat 
					"Status: CCNet&trade; Online                   CCOS&trade; v1.0.0\n"
					"  User:  root\n"
					"\n"
					"***WARNING***\n"
					"Terminal insecure, please log out of root soonish.\n"
					"---------------------------------------------------------------------------\n"
					"Please choose an option:"
					)
			</Text>
			
			<Text id="actionEngineering">"[E]ngineering Deck"</Text>
			
			<Text id="actionExplore">"[E]xplore the hangar"</Text>
			<Text id="descExploreDefault">
				(cat
					"After exploring the hangar, you manage to find a working console that gives you control of the hangar containment field, along with limited access to the station's network."
					)
			</Text>
			
			<Text id="descHangarDefault">
				(cat
					"You are currently docked in the hangar of an ancient station.\n\n"
					"The containment field is active and you can hear the thrum of the air purifiers running."
					)
			</Text>
			<Text id="descHangarSealedInside">
				(cat
					"As your ship lands in the hangar of the ancient station, an energy shield activates over the entrance, sealing your ship inside.\n\n"
					"Suddenly you hear the distant sound of air purifiers activating, removing the ash from the inside air."
					)
			</Text>
			
			<Text id="actionHydroponics">"[H]ydroponics Deck"</Text>
			
			<Text id="actionInfirmary">"[I]nfirmary"</Text>
			
			<Text id="actionMaintenance">"[M]aintenance Deck"</Text>
			<Text id="actionMaintenance:available">"Manage cargo and devices."</Text>
			<Text id="actionStore">"[S]tore cargo"</Text>
			<Text id="actionRetrieve">"[R]etrieve cargo"</Text>
			<Text id="descMaintenanceDefault">
				(cat
					"You are in a maintenance bay adjacent to the hangar. The station's loading equipment appears to still be functional and could be used to move cargo to and from your ship.\n\n"
					"It is unlikely that you would ever run out of space here."
					)
			</Text>
			
			<Text id="actionDone">"[D]one"</Text>
			<Text id="actionLeave">"[L]eave"</Text>
			<Text id="actionUndock">"[U]ndock"</Text>
			<Text id="actionUndock:unavailable">"You do not have control of the hangar forcefield."</Text>
		</Language>
	</StationType>

<!-- RESOURCES -->

	<Image UNID="&rsCCCabbagianExpanseSpace;"	bitmap="CabbagianExpanseSpace.jpg"	loadOnUse="true"/>
	<Image UNID="&rsCCPraclarushHangar;"		bitmap="PraclarushHangar.jpg"		loadOnUse="true" />
    <Image UNID="&rsCCPraclarush;"				bitmap="Praclarush.jpg"				bitmask="PraclarushMask.jpg"/>
	<Image UNID="&rsCCMassiveRelay;"			bitmap="MassiveRelay.jpg"			bitmask="MassiveRelayMask.jpg"/>

</TranscendenceModule>
